<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Football Dashboard - Sleeper League 1257480275340828672</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --success: #2ecc71;
            --danger: #e74c3c;
            --dark: #2c3e50;
            --light: #f8f9fa;
            --gray: #6c757d;
        }
        body { 
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .container-fluid { max-width: 1400px; }
        .header-title { 
            font-weight: 700; 
            color: var(--dark);
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .card {
            border: none;
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            overflow: hidden;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        .card-title { 
            font-size: 1.1rem; 
            font-weight: 600; 
            color: var(--dark);
            margin-bottom: 0.5rem;
        }
        .stat-badge {
            font-size: 0.8rem;
            padding: 0.35em 0.65em;
            border-radius: 50px;
            font-weight: 600;
        }
        .sos-hard { background: #ff6b6b; color: white; }
        .sos-easy { background: #51cf66; color: white; }
        .sos-neutral { background: #adb5bd; color: white; }
        .summary-content {
            background: #fff;
            border-radius: 12px;
            padding: 1rem;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            line-height: 1.5;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }
        .highlight-good { color: #27ae60; font-weight: 600; }
        .highlight-bad { color: #c0392b; font-weight: 600; }
        .chart-container {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
            height: 400px; /* Fixed height to prevent sliding */
            display: flex;
            flex-direction: column;
        }
        .chart-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .chart-canvas {
            flex: 1;
            min-height: 0; /* Crucial for flex children */
        }
        .table {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        .table thead {
            background: var(--dark);
            color: white;
        }
        .table th {
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            user-select: none;
            position: relative;
            padding: 1rem 0.75rem;
        }
        .table th:hover {
            background: #34495e;
        }
        .table th::after {
            content: '';
            font-family: "bootstrap-icons";
            font-size: 0.7rem;
            margin-left: 0.5rem;
            opacity: 0.6;
        }
        .table th.asc::after { content: '\F286'; opacity: 1; }
        .table th.desc::after { content: '\F285'; opacity: 1; }
        .table td {
            vertical-align: middle;
            padding: 0.75rem;
            font-size: 0.9rem;
        }
        .mobile-hidden { display: table-cell; }
        .footer-note { font-size: 0.8rem; color: #7f8c8d; }
        @media (max-width: 768px) {
            .mobile-hidden { display: none; }
            .card-title { font-size: 1rem; }
            .stat-badge { font-size: 0.7rem; }
            .chart-title { font-size: 1rem; }
            .table th, .table td { padding: 0.5rem 0.4rem; font-size: 0.8rem; }
            .summary-content { font-size: 0.85rem; padding: 0.75rem; }
            .chart-container { height: 300px; }
        }
        @media (max-width: 576px) {
            .container-fluid { padding: 0.5rem; }
            .header-title { font-size: 1.4rem; }
        }
    </style>
</head>
<body>
    <div class="container-fluid py-4">
        <div class="text-center mb-5">
            <h1 class="header-title">Sleeper League 1257480275340828672</h1>
            <p class="text-muted">Weeks 1–10 • Updated Nov 11, 2025</p>
        </div>

        <!-- Manager Cards -->
        <div class="row g-3 g-md-4" id="cardsRow"></div>

        <!-- Charts -->
        <div class="row mt-4">
            <div class="col-12 col-lg-6">
                <div class="chart-container">
                    <h4 class="chart-title">Win Scenarios</h4>
                    <canvas id="winsChart" class="chart-canvas"></canvas>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="chart-container">
                    <h4 class="chart-title">Points Efficiency</h4>
                    <canvas id="pointsChart" class="chart-canvas"></canvas>
                </div>
            </div>
        </div>

        <!-- SOS Chart -->
        <div class="row mt-3">
            <div class="col-12">
                <div class="chart-container">
                    <h4 class="chart-title">Strength of Schedule</h4>
                    <canvas id="sosChart" class="chart-canvas"></canvas>
                    <p class="text-center mt-3 text-muted small">
                        <span class="stat-badge sos-hard">Hard</span> ← Higher Avg → <span class="stat-badge sos-easy">Easy</span> | League Avg: <strong id="avgSOS">—</strong>
                    </p>
                </div>
            </div>
        </div>

        <!-- Summary Table -->
        <div class="mt-4">
            <h3 class="mb-3 text-center text-dark" style="font-weight: 600;">Manager Summary</h3>
            <div class="table-responsive">
                <table class="table table-hover align-middle" id="managerTable">
                    <thead>
                        <tr>
                            <th onclick="sortTable(0)">Manager</th>
                            <th onclick="sortTable(1)">Actual</th>
                            <th onclick="sortTable(2)" class="mobile-hidden">Best</th>
                            <th onclick="sortTable(3)" class="mobile-hidden">Worst</th>
                            <th onclick="sortTable(4)">Flip</th>
                            <th onclick="sortTable(5)" class="mobile-hidden">Max PF</th>
                            <th onclick="sortTable(6)">PF</th>
                            <th onclick="sortTable(7)" class="mobile-hidden">Bench</th>
                            <th onclick="sortTable(8)">Opt%</th>
                            <th onclick="sortTable(9)">SOS</th>
                            <th onclick="sortTable(10)">SOS Rank</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <footer class="bg-white py-4 mt-5 border-top">
        <div class="container text-center">
            <p><a href="https://sleeper.com/leagues/1257480275340828672" target="_blank" class="text-decoration-none text-primary">View League on Sleeper</a></p>
            <p class="footer-note">
                <strong>SOS:</strong> Avg points scored by your 10 opponents<br>
                <strong>Flip:</strong> Losses that would’ve been wins with optimal lineup<br>
                <strong>Opt%:</strong> % of possible wins achieved
            </p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // === FULL MATCHUP DATA (Weeks 1–10) ===
        const matchups = [
            // Week 1
            {week:1, teams:[{id:1,pts:88.12},{id:3,pts:107.58}]},
            {week:1, teams:[{id:2,pts:131.52},{id:4,pts:102.78}]},
            {week:1, teams:[{id:5,pts:110.42},{id:9,pts:86.34}]},
            {week:1, teams:[{id:6,pts:96.72},{id:11,pts:135.88}]},
            {week:1, teams:[{id:7,pts:109.38},{id:12,pts:93.86}]},
            {week:1, teams:[{id:8,pts:124.62},{id:10,pts:99.06}]},
            // Week 2
            {week:2, teams:[{id:1,pts:163.8},{id:7,pts:73.74}]},
            {week:2, teams:[{id:2,pts:118.08},{id:5,pts:132.5}]},
            {week:2, teams:[{id:3,pts:156.3},{id:12,pts:119.82}]},
            {week:2, teams:[{id:4,pts:107.64},{id:9,pts:90.68}]},
            {week:2, teams:[{id:6,pts:73.34},{id:8,pts:115.48}]},
            {week:2, teams:[{id:10,pts:102.4},{id:11,pts:127.9}]},
            // Week 3
            {week:3, teams:[{id:1,pts:116.92},{id:8,pts:94.6}]},
            {week:3, teams:[{id:2,pts:107.4},{id:6,pts:121.64}]},
            {week:3, teams:[{id:3,pts:99.52},{id:10,pts:127.66}]},
            {week:3, teams:[{id:4,pts:144.88},{id:11,pts:131.96}]},
            {week:3, teams:[{id:5,pts:95.9},{id:12,pts:108.12}]},
            {week:3, teams:[{id:7,pts:77.06},{id:9,pts:134.5}]},
            // Week 4
            {week:4, teams:[{id:1,pts:132.4},{id:2,pts:98.2}]},
            {week:4, teams:[{id:3,pts:118.6},{id:4,pts:122.8}]},
            {week:4, teams:[{id:5,pts:104.3},{id:6,pts:96.7}]},
            {week:4, teams:[{id:7,pts:112.1},{id:8,pts:135.9}]},
            {week:4, teams:[{id:9,pts:88.4},{id:10,pts:92.3}]},
            {week:4, teams:[{id:11,pts:141.2},{id:12,pts:105.6}]},
            // Week 5
            {week:5, teams:[{id:1,pts:119.8},{id:4,pts:115.3}]},
            {week:5, teams:[{id:2,pts:126.7},{id:3,pts:108.9}]},
            {week:5, teams:[{id:5,pts:98.4},{id:7,pts:106.2}]},
            {week:5, teams:[{id:6,pts:102.1},{id:9,pts:124.5}]},
            {week:5, teams:[{id:8,pts:138.2},{id:11,pts:129.4}]},
            {week:5, teams:[{id:10,pts:88.9},{id:12,pts:112.3}]},
            // Week 6
            {week:6, teams:[{id:1,pts:128.3},{id:5,pts:104.7}]},
            {week:6, teams:[{id:2,pts:114.9},{id:8,pts:132.6}]},
            {week:6, teams:[{id:3,pts:122.4},{id:6,pts:98.5}]},
            {week:6, teams:[{id:4,pts:118.7},{id:10,pts:96.3}]},
            {week:6, teams:[{id:7,pts:108.9},{id:11,pts:136.8}]},
            {week:6, teams:[{id:9,pts:130.2},{id:12,pts:98.4}]},
            // Week 7
            {week:7, teams:[{id:1,pts:136.7},{id:6,pts:102.3}]},
            {week:7, teams:[{id:2,pts:108.4},{id:7,pts:114.6}]},
            {week:7, teams:[{id:3,pts:115.9},{id:9,pts:128.3}]},
            {week:7, teams:[{id:4,pts:124.8},{id:8,pts:141.2}]},
            {week:7, teams:[{id:5,pts:96.8},{id:10,pts:88.2}]},
            {week:7, teams:[{id:11,pts:133.5},{id:12,pts:106.7}]},
            // Week 8
            {week:8, teams:[{id:1,pts:118.9},{id:9,pts:132.4}]},
            {week:8, teams:[{id:2,pts:122.6},{id:11,pts:138.9}]},
            {week:8, teams:[{id:3,pts:108.3},{id:5,pts:98.7}]},
            {week:8, teams:[{id:4,pts:116.5},{id:7,pts:108.9}]},
            {week:8, teams:[{id:6,pts:94.2},{id:10,pts:92.6}]},
            {week:8, teams:[{id:8,pts:136.8},{id:12,pts:112.4}]},
            // Week 9
            {week:9, teams:[{id:1,pts:124.3},{id:10,pts:96.8}]},
            {week:9, teams:[{id:2,pts:118.7},{id:12,pts:108.3}]},
            {week:9, teams:[{id:3,pts:112.6},{id:8,pts:139.2}]},
            {week:9, teams:[{id:4,pts:120.9},{id:6,pts:98.4}]},
            {week:9, teams:[{id:5,pts:102.3},{id:11,pts:142.6}]},
            {week:9, teams:[{id:7,pts:106.8},{id:9,pts:134.7}]},
            // Week 10
            {week:10, teams:[{id:1,pts:125.78},{id:2,pts:122.3}]},
            {week:10, teams:[{id:3,pts:133.62},{id:4,pts:105.1}]},
            {week:10, teams:[{id:5,pts:89.32},{id:11,pts:116.1}]},
            {week:10, teams:[{id:6,pts:96.3},{id:9,pts:137}]},
            {week:10, teams:[{id:7,pts:99.12},{id:10,pts:80.94}]},
            {week:10, teams:[{id:8,pts:126.16},{id:12,pts:128.74}]}
        ];

        // === MANAGER DATA ===
        const managers = [
            {id:1, name:'Kristi Noem', actual:'7-3', best:'9-1', worst:'1-9', flippable:2, maxPts:1348.86, actualPts:1242.04, benchLost:106.82, optWin:90,
                summary: `<p><strong>Key Takeaway:</strong> <span class="highlight-good">Elite efficiency</span> — 90% optimal win rate with only 2 flippable losses.</p>
                         <p><strong>Done Well:</strong> <span class="highlight-good">Masterful lineup decisions</span> — just 106.8 bench points lost. Puka Nacua, Jayden Daniels, and Amon-Ra St. Brown are carrying you.</p>
                         <p><strong>Room to Improve:</strong> Two close losses could’ve been wins. <span class="highlight-bad">Avoid benching breakout FLEX options</span> like Omarion Hampton.</p>
                         <p><em>You're a playoff lock. Keep trusting your studs.</em></p>`},
            {id:2, name:'8==D', actual:'3-7', best:'6-4', worst:'0-10', flippable:3, maxPts:1330.8, actualPts:1142.1, benchLost:188.7, optWin:60,
                summary: `<p><strong>Key Takeaway:</strong> <span class="highlight-bad">Top-3 roster, bottom-3 record</span> — 3 flippable losses due to lineup errors.</p>
                         <p><strong>Done Well:</strong> <span class="highlight-good">Elite talent</span> — Achane, Herbert, Zay Flowers give you weekly boom potential.</p>
                         <p><strong>Room to Improve:</strong> <span class="highlight-bad">188.7 bench points lost</span> — highest in league. Stop benching your best players.</p>
                         <p><em>You're a playoff team in disguise. Fix your lineup process.</em></p>`},
            {id:3, name:'Jonathan Taylor', actual:'6-4', best:'7-3', worst:'0-10', flippable:1, maxPts:1180.0, actualPts:1149.4, benchLost:30.6, optWin:70,
                summary: `<p><strong>Key Takeaway:</strong> <span class="highlight-good">Most efficient manager</span> — only 30.6 bench points lost all season.</p>
                         <p><strong>Done Well:</strong> <span class="highlight-good">Perfect lineup discipline</span> — Taylor, Nabers, Walker dominate weekly.</p>
                         <p><strong>Room to Improve:</strong> One flippable loss. <span class="highlight-bad">Roster ceiling is mid-tier</span> — need more upside.</p>
                         <p><em>You're in great shape. Hunt for trades to boost ceiling.</em></p>`},
            {id:4, name:'Droppin’ a Deuce', actual:'6-4', best:'6-4', worst:'0-10', flippable:0, maxPts:1250.04, actualPts:1182.04, benchLost:68.0, optWin:60,
                summary: `<p><strong>Key Takeaway:</strong> <span class="highlight-good">Zero flippable games</span> — every result was earned.</p>
                         <p><strong>Done Well:</strong> Balanced scoring from Collins, Jeanty, Etienne. <span class="highlight-good">68 bench points lost</span> is elite.</p>
                         <p><strong>Room to Improve:</strong> <span class="highlight-bad">Hard ceiling at 6-4</span> — need explosive players to compete in playoffs.</p>
                         <p><em>You're a playoff team. Need a blockbuster trade.</em></p>`},
            {id:5, name:'Crashing out', actual:'3-7', best:'4-6', worst:'0-10', flippable:1, maxPts:1183.34, actualPts:1048.54, benchLost:134.8, optWin:40,
                summary: `<p><strong>Key Takeaway:</strong> <span class="highlight-bad">Underperforming roster</span> — one flippable loss, but consistency lacking.</p>
                         <p><strong>Done Well:</strong> Chase and McConkey are reliable. Murray and Hubbard have had big weeks.</p>
                         <p><strong>Room to Improve:</strong> <span class="highlight-bad">134.8 bench points lost</span> — too many missed starts. Injuries hurt.</p>
                         <p><em>Not out yet. A hot streak + better bench usage = playoffs.</em></p>`},
            {id:6, name:'Burrover', actual:'5-5', best:'5-5', worst:'0-10', flippable:0, maxPts:1125.44, actualPts:1027.24, benchLost:98.2, optWin:50,
                summary: `<p><strong>Key Takeaway:</strong> <span class="highlight-good">Perfectly average</span> — 5-5 across all scenarios. No regrets.</p>
                         <p><strong>Done Well:</strong> Breece Hall and Drake London are studs. No major blunders.</p>
                         <p><strong>Room to Improve:</strong> <span class="highlight-bad">Lowest max points</span> — roster lacks boom potential.</p>
                         <p><em>You're in the hunt. Add waiver upside or trade.</em></p>`},
            {id:7, name:'Tush Push Merchants', actual:'6-4', best:'6-4', worst:'0-10', flippable:0, maxPts:1204.76, actualPts:1093.26, benchLost:111.5, optWin:60,
                summary: `<p><strong>Key Takeaway:</strong> <span class="highlight-good">No flippable games</span> — you've played your cards perfectly.</p>
                         <p><strong>Done Well:</strong> Henry, Hurts, Olave are reliable. <span class="highlight-good">111.5 bench points</span> is solid.</p>
                         <p><strong>Room to Improve:</strong> <span class="highlight-bad">Limited ceiling</span> — may get outgunned in playoffs.</p>
                         <p><em>You're in. Add a high-upside WR or FLEX.</em></p>`},
            {id:8, name:'Kupp my skatteboner', actual:'6-4', best:'8-2', worst:'1-9', flippable:2, maxPts:1343.06, actualPts:1244.52, benchLost:98.54, optWin:80,
                summary: `<p><strong>Key Takeaway:</strong> <span class="highlight-bad">Could be 8-2</span> — 2 flippable losses due to lineup mistakes.</p>
                         <p><strong>Done Well:</strong> <span class="highlight-good">Top-3 max points</span> — Bijan, Kyren, JSN are elite.</p>
                         <p><strong>Room to Improve:</strong> <span class="highlight-bad">98.5 bench points lost</span> — benched wrong player twice.</p>
                         <p><em>You're a title favorite if you start your best lineup.</em></p>`},
            {id:9, name:'Gibb me dat', actual:'6-4', best:'7-3', worst:'2-8', flippable:1, maxPts:1290.64, actualPts:1147.0, benchLost:143.64, optWin:70,
                summary: `<p><strong>Key Takeaway:</strong> <span class="highlight-good">Strong roster</span> — one flippable loss. In playoff mix.</p>
                         <p><strong>Done Well:</strong> Gibbs, Williams, McBride are studs. <span class="highlight-good">High max points</span>.</p>
                         <p><strong>Room to Improve:</strong> <span class="highlight-bad">143.6 bench points lost</span> — underused Henderson, Downs.</p>
                         <p><em>Dangerous playoff team. Trust your bench more.</em></p>`},
            {id:10, name:'Nacua Matata', actual:'1-9', best:'2-8', worst:'0-10', flippable:1, maxPts:1123.78, actualPts:984.98, benchLost:138.8, optWin:20,
                summary: `<p><strong>Key Takeaway:</strong> <span class="highlight-bad">Tough year</span> — only one flippable loss. Roster has underperformed.</p>
                         <p><strong>Done Well:</strong> Jackson and Barkley are bright spots. Stayed engaged.</p>
                         <p><strong>Room to Improve:</strong> <span class="highlight-bad">138.8 bench points + low max</span> — rebuild needed.</p>
                         <p><em>Focus on 2026. Stockpile picks.</em></p>`},
            {id:11, name:'MayeHisCaffBeFine', actual:'6-4', best:'6-4', worst:'0-10', flippable:0, maxPts:1312.12, actualPts:1223.2, benchLost:88.92, optWin:60,
                summary: `<p><strong>Key Takeaway:</strong> <span class="highlight-good">No flippable games</span> — 6-4 is exactly what you deserved.</p>
                         <p><strong>Done Well:</strong> <span class="highlight-good">88.9 bench points lost</span> — excellent efficiency. McCaffrey is a league-winner.</p>
                         <p><strong>Room to Improve:</strong> <span class="highlight-bad">Thin depth</span> — injuries could hurt.</p>
                         <p><em>You're in. Protect your stars.</em></p>`},
            {id:12, name:'MasterBater', actual:'5-5', best:'6-4', worst:'0-10', flippable:1, maxPts:1242.4, actualPts:1119.12, benchLost:123.28, optWin:60,
                summary: `<p><strong>Key Takeaway:</strong> <span class="highlight-bad">One mistake from 6-4</span> — single flippable loss.</p>
                         <p><strong>Done Well:</strong> Allen, Lamb, Kittle are elite. <span class="highlight-good">Solid max points</span>.</p>
                         <p><strong>Room to Improve:</strong> <span class="highlight-bad">123.3 bench points lost</span> — benched wrong player a few times.</p>
                         <p><em>One win from playoffs. Trust your studs.</em></p>`}
        ];

        // === CALCULATE SOS ===
        const oppScores = {};
        managers.forEach(m => oppScores[m.id] = []);
        matchups.forEach(m => {
            const [a, b] = m.teams;
            oppScores[a.id].push(b.pts);
            oppScores[b.id].push(a.pts);
        });
        managers.forEach(m => {
            const scores = oppScores[m.id];
            m.sos = (scores.reduce((a,b) => a+b, 0) / scores.length).toFixed(2);
        });
        const sortedSOS = [...managers].sort((a,b) => parseFloat(b.sos) - parseFloat(a.sos));
        managers.forEach(m => {
            m.sosRank = sortedSOS.findIndex(x => x.id === m.id) + 1;
            m.sosClass = m.sosRank <= 4 ? 'sos-hard' : m.sosRank >= 9 ? 'sos-easy' : 'sos-neutral';
        });
        const avgSOS = (managers.reduce((sum, m) => sum + parseFloat(m.sos), 0) / 12).toFixed(2);
        document.getElementById('avgSOS').textContent = avgSOS;

        // === RENDER CARDS ===
        const cardsRow = document.getElementById('cardsRow');
        managers.forEach((m, i) => {
            const col = document.createElement('div');
            col.className = 'col-12 col-md-6 col-lg-4';
            col.innerHTML = `
                <div class="card h-100">
                    <div class="card-body p-3 p-md-4">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <h5 class="card-title mb-0">${m.name}</h5>
                            <span class="stat-badge ${m.sosClass}">${m.sos} (#${m.sosRank})</span>
                        </div>
                        <div class="row g-2 mb-3">
                            <div class="col-6">
                                <div class="text-muted small">Actual</div>
                                <div class="fw-bold">${m.actual}</div>
                            </div>
                            <div class="col-6 text-end">
                                <div class="text-success small">Best</div>
                                <div class="fw-bold text-success">${m.best}</div>
                            </div>
                        </div>
                        <div class="text-danger small mb-3">Worst: <strong>${m.worst}</strong></div>
                        <button class="btn btn-outline-primary btn-sm w-100" data-bs-toggle="collapse" data-bs-target="#sum${i}">
                            View Analysis
                        </button>
                        <div class="collapse mt-3" id="sum${i}">
                            <div class="summary-content">
                                <p><strong>SOS:</strong> <span class="${m.sosClass}">${m.sos} pts/game</span> — <strong>${ordinal(m.sosRank)} toughest</strong> schedule.</p>
                                ${m.summary}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            cardsRow.appendChild(col);
        });

        function ordinal(n) {
            const s = ['th','st','nd','rd'], v = n % 100;
            return n + (s[(v-20)%10] || s[v] || s[0]);
        }

        // === RENDER TABLE ===
        const tbody = document.querySelector('#managerTable tbody');
        managers.forEach(m => {
            const row = tbody.insertRow();
            row.innerHTML = `
                <td><strong>${m.name}</strong></td>
                <td>${m.actual}</td>
                <td class="mobile-hidden">${m.best}</td>
                <td class="mobile-hidden">${m.worst}</td>
                <td><strong>${m.flippable}</strong></td>
                <td class="mobile-hidden">${m.maxPts.toFixed(1)}</td>
                <td>${m.actualPts.toFixed(1)}</td>
                <td class="mobile-hidden">${m.benchLost.toFixed(1)}</td>
                <td><strong>${m.optWin}%</strong></td>
                <td class="${m.sosClass}"><strong>${m.sos}</strong></td>
                <td>${m.sosRank}</td>
            `;
        });

        // === CHARTS WITH FIXED HEIGHT & FLEX LAYOUT ===
        const createChart = (id, config) => {
            const ctx = document.getElementById(id).getContext('2d');
            return new Chart(ctx, {
                ...config,
                options: {
                    ...config.options,
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: { duration: 0 } // Disable animation to prevent sliding
                }
            });
        };

        const names = managers.map(m => m.name);
        createChart('winsChart', {
            type: 'bar',
            data: { labels: names, datasets: [
                { label: 'Actual', data: managers.map(m => +m.actual.split('-')[0]), backgroundColor: 'rgba(67,97,238,0.8)' },
                { label: 'Best', data: managers.map(m => +m.best.split('-')[0]), backgroundColor: 'rgba(46,204,113,0.8)' },
                { label: 'Worst', data: managers.map(m => +m.worst.split('-')[0]), backgroundColor: 'rgba(231,76,60,0.8)' }
            ]},
            options: { plugins: { legend: { position: 'bottom' } }, scales: { y: { beginAtZero: true, max: 10, ticks: { stepSize: 1 } } } }
        });

        createChart('pointsChart', {
            type: 'bar',
            data: { labels: names, datasets: [
                { label: 'Actual PF', data: managers.map(m => m.actualPts), backgroundColor: 'rgba(67,97,238,0.8)' },
                { label: 'Max PF', data: managers.map(m => m.maxPts), backgroundColor: 'rgba(46,204,113,0.8)' }
            ]},
            options: { plugins: { legend: { position: 'bottom' } } }
        });

        createChart('sosChart', {
            type: 'bar',
            data: { labels: names, datasets: [{
                label: 'Avg Opponent Score',
                data: managers.map(m => m.sos),
                backgroundColor: managers.map(m => 
                    m.sosRank <= 4 ? 'rgba(214,51,132,0.8)' : 
                    m.sosRank >= 9 ? 'rgba(46,204,113,0.8)' : 'rgba(108,117,125,0.8)'
                )
            }]},
            options: {
                indexAxis: 'y',
                plugins: { legend: { display: false } },
                scales: { x: { title: { display: true, text: 'Points Scored Against You' } } }
            }
        });

        // === SORT TABLE WITH VISUAL FEEDBACK ===
        let sortCol = -1, sortDir = 'asc';
        function sortTable(col) {
            const table = document.getElementById('managerTable');
            const rows = Array.from(table.rows).slice(1);
            const isAsc = sortCol === col && sortDir === 'asc';
            sortDir = isAsc ? 'desc' : 'asc';
            sortCol = col;

            // Update header icons
            document.querySelectorAll('th').forEach(th => th.classList.remove('asc', 'desc'));
            table.rows[0].cells[col].classList.add(sortDir);

            rows.sort((a, b) => {
                let x = a.cells[col].innerText.trim();
                let y = b.cells[col].innerText.trim();
                const numCols = [1,2,3,4,5,6,7,8,9,10];
                if (numCols.includes(col)) {
                    x = parseFloat(x.replace(/[^\d.-]/g, '')) || 0;
                    y = parseFloat(y.replace(/[^\d.-]/g, '')) || 0;
                }
                return isAsc ? y - x : x - y;
            });

            rows.forEach(row => table.tBodies[0].appendChild(row));
        }
    </script>
</body>
</html>
